# VoiceOps

[![Go Report Card](https://goreportcard.com/badge/github.com/rehydrate1/voiceops)](https://goreportcard.com/report/github.com/rehydrate1/voiceops)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**VoiceOps** ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —É–º–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ **SberDevices** (SberBoom, –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –°–∞–ª—é—Ç).

–ü—Ä–æ–µ–∫—Ç —Å–ª—É–∂–∏—Ç –º–æ—Å—Ç–æ–º –º–µ–∂–¥—É —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π —É–º–Ω–æ–≥–æ –¥–æ–º–∞ –∏ IT-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, –ø–æ–∑–≤–æ–ª—è—è –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤, –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö —á–µ—Ä–µ–∑ SSH –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º —Å –ø–æ–º–æ—â—å—é –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ä–µ—á–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   ** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–ø–∏—Å–∫–∞ URL –∏ –≥–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç—á–µ—Ç –æ —Å—Ç–∞—Ç—É—Å–µ ("–ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ–¥", "–ó–∞–ø—É—Å—Ç–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É").
*   ** –£–¥–∞–ª–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (SSH):** –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö –ø–æ –≥–æ–ª–æ—Å–æ–≤—ã–º —Ç—Ä–∏–≥–≥–µ—Ä–∞–º. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—é –æ—Ç–≤–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–≤–æ–¥ `uptime`).
*   ** Wake-on-LAN (WoL):** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ü–ö —á–µ—Ä–µ–∑ Magic Packets (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Feature Flags).
*   ** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –°–∞–ª—é—Ç–æ–º:** –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SmartApp API (–ø—Ä–æ—Ç–æ–∫–æ–ª Webhook).
*   ** –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –í—Å–µ –∫–æ–º–∞–Ω–¥—ã, URL –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–æ—Å—Ç—É–ø—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –µ–¥–∏–Ω–æ–º YAML-—Ñ–∞–π–ª–µ.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

-   **–Ø–∑—ã–∫:** Go 1.22+
-   **–í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫:** [Gin](https://github.com/gin-gonic/gin)
-   **SSH –ö–ª–∏–µ–Ω—Ç:** `golang.org/x/crypto/ssh`
-   **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `gopkg.in/yaml.v3`
-   **CI/CD:** GitHub Actions (Build & Lint)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –æ–±–ª–∞—á–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –≤ –∑–∞–∫—Ä—ã—Ç—É—é –ª–æ–∫–∞–ª—å–Ω—É—é —Å–µ—Ç—å.

**–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
1.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –Ω–∞–≤—ã–∫: *"–°–∞–ª—é—Ç, –∑–∞–ø—É—Å—Ç–∏ VoiceOps"*.
2.  **–û–±–ª–∞–∫–æ –°–±–µ—Ä–∞** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫—É.
3.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –¥–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–Ω—É—Ç—Ä–∏ –Ω–∞–≤—ã–∫–∞: *"–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞"*.
4.  **–¢—É–Ω–Ω–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ó–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ Reverse Proxy (Nginx –Ω–∞ VPS) –∏ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ª–æ–∫–∞–ª—å–Ω—É—é —Å–µ—Ç—å —á–µ—Ä–µ–∑ **SSH Reverse Tunnel**.
5.  **–Ø–¥—Ä–æ VoiceOps:**
    *   –ü–∞—Ä—Å–∏—Ç –∏–Ω—Ç–µ–Ω—Ç (–Ω–∞–º–µ—Ä–µ–Ω–∏–µ) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   –í—ã–ø–æ–ª–Ω—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (HTTP-–∑–∞–ø—Ä–æ—Å, SSH-—Å–µ—Å—Å–∏—è –∏–ª–∏ UDP-–ø–∞–∫–µ—Ç).
    *   –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç.
6.  **–ö–æ–ª–æ–Ω–∫–∞** –æ–∑–≤—É—á–∏–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture –∏ Standard Go Layout:

```text
.
‚îú‚îÄ‚îÄ cmd/               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ main.go        # –°–±–æ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∑–∞–ø—É—Å–∫
‚îú‚îÄ‚îÄ configs/           # –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ config.yaml
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ config/        # –õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ handler/       # HTTP —Ö–µ–Ω–¥–ª–µ—Ä—ã (–ª–æ–≥–∏–∫–∞ SmartApp API)
‚îÇ   ‚îú‚îÄ‚îÄ models/        # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (Sber Request/Response)
‚îÇ   ‚îî‚îÄ‚îÄ service/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (SSH, Monitoring, WoL)
‚îú‚îÄ‚îÄ .github/           # CI Workflows
‚îî‚îÄ‚îÄ go.mod
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ `configs/config.yaml` –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

```yaml
ssh:
  host: "185.200.x.x:22"
  user: "root"
  key_path: "./id_rsa"

monitoring:
  urls:
    - "https://google.com"
    - "https://my-service.com"

commands:
  - phrase: "–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ –±–æ—Ç–∞"
    script: "docker restart my-bot"
    response: "–ì–æ—Ç–æ–≤–æ. –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω."
  
  - phrase: "—Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞"
    script: "uptime"
    response: "–°–µ—Ä–≤–µ—Ä –≤ –ø–æ—Ä—è–¥–∫–µ. –ê–ø—Ç–∞–π–º: %s" # %s –∑–∞–º–µ–Ω–∏—Ç—Å—è –Ω–∞ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã

wol:
  enabled: false # –í–∫–ª—é—á–∏—Ç—å, –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
  devices:
    - name: "–º–æ–π –ø–∫"
      mac: "AA:BB:CC:DD:EE:FF"
      broadcast_ip: "192.168.1.255:9"
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Go 1.22+.
*   SSH-–∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ü–µ–ª–µ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É.
*   –ê–∫–∫–∞—É–Ω—Ç –≤ **Studio SberDevices** (–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞–≤—ã–∫–∞).

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥:

```bash
git clone https://github.com/rehydrate1/voiceops.git
cd voiceops
cp configs/config.yaml.example configs/config.yaml
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ configs/config.yaml, —É–∫–∞–∑–∞–≤ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
```

### 3. –ó–∞–ø—É—Å–∫
```bash
go mod tidy
go run cmd/main.go
```
–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É `:8080`.

### 4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –°–±–µ—Ä—É
–î–ª—è —Ä–∞–±–æ—Ç—ã –≤–µ–±—Ö—É–∫–∞ –Ω—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π HTTPS –∞–¥—Ä–µ—Å. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± ‚Äî SSH-—Ç—É–Ω–Ω–µ–ª—å —á–µ—Ä–µ–∑ —Å–≤–æ–π VPS:

```bash
ssh -N -R 9000:localhost:8080 user@your-vps-ip
```

## üîÆ –ü–ª–∞–Ω—ã –ø–æ —Ä–∞–∑–≤–∏—Ç–∏—é

-   [ ] **–ú–µ—Ç—Ä–∏–∫–∏:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus & Grafana –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞.
-   [ ] **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥.
-   [ ] **Docker:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Raspberry Pi.

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.
